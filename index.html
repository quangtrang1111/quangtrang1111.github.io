<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>1212428 - Huá»³nh Quang Trang</title>

    <meta name="description" content="Filter video using canvas HTML5">
    <meta name="author" content="Quang Trang">
</head>

<body>
    <video id="video" controls>
        <source src="http://channelz2.mp3.zdn.vn/zv/0814219eafffb5f840618562594da7c0/57240390/2016/01/22/f/8/f8a1191b9a99829068c5c5dbb8b4a4d2.mp4?filename=Sau%20Tat%20Ca%20-%20ERIK%20ST%20319.mp4" type="video/mp4" />
    </video>
    <canvas id="canvas" width="640" height="338" style="border:1px solid #d3d3d3;">
      Your browser does not support the HTML5 canvas tag.
      </canvas>

    <script type="text/javascript">
        // Apply grayscale filter.
        grayscale = function(pixels) {
            var d = pixels.data;
            for (var i = 0; i < d.length; i += 4) {
                var r = d[i];
                var g = d[i + 1];
                var b = d[i + 2];
                // CIE luminance for the RGB
                var v = (0.2126 * r) + (0.7152 * g) + (0.0722 * b);
                d[i] = d[i + 1] = d[i + 2] = v;
            }
            return pixels;
        }

        window.onload = function() {
            var video = document.getElementById("video");
            var canvas = document.getElementById('canvas');
            var context = canvas.getContext('2d');

            video.addEventListener("play", function() {
                //context.drawImage(this, 0, 0);
                var imageData = context.getImageData(0, 0, this.width, this.height);
                console.log(imageData)
                //context.putImageData(grayscale(imageData), 0, 0)
            }, false);

            // var image = new Image();
            // image.onload = function() {
            //     var canvas = document.getElementById('canvas');
            //     var context = canvas.getContext('2d');

            //     context.drawImage(this, 0, 0);
            //     var imageData = context.getImageData(0, 0, this.width, this.height);
            //     context.putImageData(grayscale(imageData), 0, 0)
            // };
            // image.src = './demo.jpg';

        }
    </script>
</body>

</html>